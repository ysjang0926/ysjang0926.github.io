*---
layout: post
title:  "제조 데이터 분석에서 파생변수 생성이란?"
subtitle:   "manufacturing_data"
categories: etc
tags: etc_work
comments: true
---*

https://yeong-jin-data-blog.tistory.com/m

* 이번 글은 제조 데이터 분석을 하면서 필요한 데이터 전처리 중 파생변수 생성 부분에 대해 정리해보았습니다. 
* 데이터 및 공정 등 어떤 분석을 하냐에 따라서 생성되는 파생변수들이 조금씩 달라지다보니, 주로 사용하는 것들 위주로 작성하려고 하였습니다.😅

----

흔히 알고 있는 데이터 분석 프로세스는 다음과 같습니다. 그 중 데이터 가공(Data Preprocessing)는 **분석을 수행할 때 다양한 원천 데이터 소스를 통해 목적에 맞는 데이터 형태를 만들기 위한 단계**입니다.


개인적인 생각이지만, 분석을 하면 할수록 데이터 가공 단계야말로 분석가의 노하우가 매우 중요시 되는 부분이라고 느끼고 있습니다. 그 이유는 데이터 가공을 어떻게 진행했냐에 따라, 분석 효과를 높일 수 있기 때문입니다.

<br>

## 🎈 데이터 가공의 목적과 의의



우리가 주로 접하게 되는 Kaggle이나 기타 예제 데이터들은 이미 데이터가 정제된 상태로 아주아주 예쁜 데이터입니다. 하지만 실제 우리가 맞닥뜨리게 되는 데이터는 굉장히 raw~ 날 것입니다. 그래서 데이터를 정제하고 분석하기 위한 형태로 만드는데 많은 시간을 할애하게 됩니다.


![image](https://user-images.githubusercontent.com/54492747/221466863-760c9898-e377-4716-8338-5a7ac2750183.png)
[DATA PREPROCESSING | DATA CLEANING PYTHON](https://ai-ml-analytics.com/data-preprocessing-data-cleaning-python/)




✅ 이상치 처리 기준 
• 이상치 처리 과정에서 Q3 + 1.5*IQR 기준이 빈번하게 사용된다. 근데 이 기준도 절대적인 것이 아니기 때문에 유연하게 사용해야 한다. 아래 출처에서 왜 1.5를 기준으로 쓰는지에 대한 설명 제공 
https://towardsdatascience.com/why-1-5-in-iqr-method-of-outlier-detection-5d07fdc82097

• Z-score 기준으로 할 때에도, 2.54 이상이니까 무조건 이상치로 분류하면 안 됨.  표준화 한다고 가우시안 분포가 되는 것이 아니기 때문이다. 

• 추가로 해볼 수 있는 이상치 분류 기법 : Isolation Forest / OneLCassSVM

• 언제나 중요한 것은 도메인!! 도메인에 따라서 이상치의 기준이 다르다. 일부 도메인에서는 오히려 이상치가 더 중요할 수도 있다. (모바일 게임 등)

✅ 파생변수 생성
• 모델 구축 과정에서 유의한 파생변수를 만드는 것은 굉장히 중요하다. 그런데 여러 프로젝트나 공모전에서 예측/분류 모델을 만들다 보면 나름의 분석 결과와 도메인 지식으로 도출한 인사이트를 기반으로 파생변수를 만들었는데, 모델 성능에 도움이 되지 않는 경우가 있어서 난감했던 적이 많았다. 이런 경우에는 어떻게 하지? 
→ 파생변수 생성 과정에서 내가 생각한 근거가 잘못됐을 가능성이 있다. 항상 내 머리를 의심하자. 
→ 모델 성능이 당장 좋지 않더라도 해당 파생 변수를 포함시키는게 좋을 수도 있다. 추후 데이터나 모델 구조가 바뀌었을 때, 그 변수가 유용하게 사용될 수 있기 때문이다. 

• 그럴듯한 가설과 근거를 기반으로 회귀분석을 했을 때, 예상과 다른 결과가 나온다면 오히려 흥미로운 분석이 가능한 기회일 수도 있다. 
ex) 잠재 그룹을 찾는 추가 분석을 실시할 수 있음. 예를 들어,  LDA로 잠재 그룹을 나누고 Latent class regression을 실시해보면, 집단별로 다른 유의미한 결과를 찾을 수도 있다. 

파생변수(Derived Variable)는 기존의 변수를 변형해 만든 변수입니다.

1. 통계 함수를 활용한 파생변수

2. 변수 조합을 활용한 파생변수

3. 조건문을 활용한 파생변수
- 조건에 따라 서로 다른 값을 반환하는 '조건문 함수'를 이용해 파생변수를 만드는 방법입니다.
1. 기준값 정하기
-> 연비가 20 넘기는 자동차에 고연비 합격 판정을 내리고, 넘기지 못하면 불합격으로 분류된 변수를 만들기
2. 합격 판정 변수 만들기
-> 조건문(Conditional Statments) 함수 : 조건에 따라 서로 다른 값을 반환하는 함수

 <br>
 
## 🎈 제조 데이터 분석의 목적과 의의
1. **목적** <br>
과거에는 일부 샘플 데이터를 사후 분석(불량 발생, 설비 이상)에 활용하였으며, 생산 공정의 전반적인 상황에 객관화/일반화를 통한 실시간 적용이 불가능하였습니다. <br>
이에 대응하기 위해 제조 공정의 디지털화를 추진하였고, 각 공정별 설비에서 생성되는 데이터는 폭발적으로 증가하였습니다.  IT 기술 융합을 통해 제품 생산에서 발생하는 실시간 데이터 전체를 활용함으로 효과적인 생산의사 결정과 이슈에 대한 사전 대응이 가능하고, 신규 가치 창출의 방법론으로 활용하여 효율적으로 경쟁력을 확보할 수 있습니다.
2. **의의** <br>
무엇보다 현업들의 경험적으로 알고 있는 것을 통한 의사결정이 아닌 제조 데이터 기반 객관적 의사결정이 가능하다는 점이 중요하다고 생각합니다.
- 제조 현장에서 일어나는 현상에 대해 데이터 기반의 접근과 해석을 통해 문제 해결
- 수집된 데이터 기반으로 현장 개선 활동 및 기술 과제 추진 추진 등에서의 활용 증가
- 경험에 의한 제조 공정 운용에서 다양한 공정 데이터 기반 객관화된 공정 운용으로 변화
- 사후 분석이 아닌, 실시간 공정 모니털이 및 운용을 통한 생산 효율화 향상

* 부족한 점이나 궁금한 점 있으시면 언제든 피드백 부탁드립니다.🙌

<br>
